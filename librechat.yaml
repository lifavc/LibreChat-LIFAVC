# =============================================================================
# LIFA.VC LibreChat Configuration
# =============================================================================
# Hybrid setup: LIFA.VC agents route to n8n, plus direct access to AI providers
# For more information: https://www.librechat.ai/docs/configuration/librechat_yaml
# =============================================================================

# Configuration version (required)
version: 1.0.0

# Cache settings
cache: true

# =============================================================================
# FILE STORAGE -  S3-Compatible Object Storage
# =============================================================================
# Using S3 Object Storage for GDPR compliance (data stays in EU)
fileStrategies:
  default: "s3"

# =============================================================================
# INTERFACE CUSTOMIZATION
# =============================================================================
interface:
  # Welcome message
  customWelcome: |
    Welcome to **LIFA.VC AI Platform** â€” your intelligent partner for venture capital operations.
    
    Select an agent from the menu, or create your own for specific tasks.

  # === CORE FEATURES (all enabled for flexibility) ===
  endpointsMenu: true       # Switch between endpoints (n8n, OpenAI, Anthropic, etc.)
  modelSelect: true         # Select models within endpoints
  parameters: true          # Adjust temperature, etc. when needed
  sidePanel: true           # Side panel for navigation
  presets: true             # Save and reuse conversation presets
  prompts: true             # Prompt library
  bookmarks: true           # Bookmark conversations

  # === AGENTS (enabled - core feature for your setup) ===
  agents: true              # Create and use LibreChat agents
  
  # === MULTI-CONVERSATION (enabled - mix agents in same chat) ===
  multiConvo: true          # Use multiple agents in one conversation

  # === FILE FEATURES ===
  fileCitations: true       # Show file citations in responses
  fileSearch: true          # Search within files

  # === SHARING (enabled for GP team collaboration) ===
  peoplePicker:
    users: true             # Share with specific users
    groups: true            # Share with groups (if you create a "GP" group)
    roles: true             # Role-based sharing

  # === MARKETPLACE (optional - browse community agents) ===
  marketplace:
    use: true               # Enable if you want to browse/import community agents

  # === MCP SERVERS (optional - enable if you want MCP integrations) ===
  mcpServers:
    use: true               # Use MCP servers
    create: true            # Create custom MCP servers
    share: true             # Share MCP configs between users

  # === LEGAL LINKS ===
  privacyPolicy:
    externalUrl: 'https://www.lifa.ventures/legal/privacy-policy'
    openNewTab: true

  termsOfService:
    externalUrl: 'https://lifa.vc/terms'
    openNewTab: true
    modalAcceptance: false  # Disable modal for internal team use

# =============================================================================
# REGISTRATION & ACCESS
# =============================================================================
registration:
  # Disable social logins - email only for internal team
  socialLogins: ["google"]
  
  # Restrict registration to LIFA domain
  allowedDomains:
    - "lifa.vc"
    - "lifa.ventures"

# =============================================================================
# ENDPOINTS CONFIGURATION
# =============================================================================
# You have multiple endpoint types:
# 1. Custom endpoints (n8n webhooks for LIFA agents)
# 2. Built-in endpoints (OpenAI, Anthropic, Google) for ad-hoc chats
#
# Built-in endpoints are configured via environment variables:
# - OPENAI_API_KEY, ANTHROPIC_API_KEY, GOOGLE_KEY, etc.
# =============================================================================

endpoints:
  custom:
    - name: "LIFA.VC Agents"
      apiKey: "${BRIDGE_BEARER_TOKEN}"
      baseURL: "https://bridge.lifa.tools/v1"
      models:
        default: ["alfred", "alex", "sarah", "linda", "mia", "marcus"]
        fetch: true  # Bridge supports /v1/models endpoint
      titleConvo: true
      titleModel: "alfred"
      modelDisplayLabel: "LIFA"
      headers:
        X-Chat-Id: "{{LIBRECHAT_BODY_CONVERSATIONID}}"
        X-User-Id: "{{LIBRECHAT_USER_ID}}"
        X-User-Email: "{{LIBRECHAT_USER_EMAIL}}"
        X-User-Name: "{{LIBRECHAT_USER_NAME}}"
        X-User-Role: "{{LIBRECHAT_USER_ROLE}}"
      titleConvo: true
      summary: true
    # -----------------------------------------
    # n8n: Alfred (Orchestrator / Chief of Staff)
    # Routes to specialist agents or handles operational tasks
    # -----------------------------------------
    - name: "Alfred"
      apiKey: "${N8N_ALFRED_KEY}"
      baseURL: "${N8N_ALFRED_URL}"
      models:
        default: ["alfred"]
        fetch: false
      titleConvo: true
      titleModel: "alfred"
      modelDisplayLabel: "Alfred - Chief of Staff"
      iconURL: "https://cdn.prod.website-files.com/670d763f1593e36762b44a69/695aae1c415f4a17af2eed5f_alfred-profile.jpeg"
      # n8n webhook compatibility
      directEndpoint: true
      forcePrompt: false
      streamRate: 0
      addParams:
        stream: false
      headers:
        Content-Type: "application/json"
      dropParams: ["stop", "frequency_penalty", "presence_penalty", "top_p"]

    # -----------------------------------------
    # n8n: Alex (Deal Analyst)
    # MedTech investment analysis, deal memos, scoring
    # -----------------------------------------
    - name: "Alex"
      apiKey: "${N8N_ALEX_KEY}"
      baseURL: "${N8N_ALEX_URL}"
      models:
        default: ["alex"]
        fetch: false
      titleConvo: true
      titleModel: "Alex"
      modelDisplayLabel: "Alex - Deal Analyst"
      iconURL: "https://cdn.prod.website-files.com/670d763f1593e36762b44a69/695aae1f33dc0322198f3cdb_alex-profile.jpg"
      directEndpoint: true
      addParams:
        session_id: "{{user._id}}"
        user_email: "{{user.email}}"
      headers:
        Content-Type: "application/json"
        X-User-ID: "{{LIBRECHAT_USER_ID}}"
        X-User-Email: "{{LIBRECHAT_USER_EMAIL}}"
        X-Conversation-ID: "{{LIBRECHAT_BODY_CONVERSATIONID}}"
        X-Parent-Message-ID: "{{LIBRECHAT_BODY_PARENTMESSAGEID}}"
        X-Message-ID: "{{LIBRECHAT_BODY_MESSAGEID}}"
      dropParams: ["stop", "frequency_penalty", "presence_penalty", "top_p"]

    # -----------------------------------------
    # n8n: Sarah (External Relations)
    # LP communications, founder emails, relationship strategy
    # -----------------------------------------
    - name: "Sarah"
      apiKey: "${N8N_SARAH_KEY}"
      baseURL: "${N8N_SARAH_URL}"
      models:
        default: ["sarah"]
        fetch: false
      titleConvo: true
      titleModel: "sarah"
      modelDisplayLabel: "Sarah - External Relations"
      iconURL: "https://cdn.prod.website-files.com/670d763f1593e36762b44a69/695aae301e39302170caeec9_sarah-profile.jpg"
      directEndpoint: true
      forcePrompt: false
      streamRate: 0
      addParams:
        stream: false
      headers:
        Content-Type: "application/json"
      dropParams: ["stop", "frequency_penalty", "presence_penalty", "top_p"]

    # -----------------------------------------
    # n8n: Linda (Legal)
    # Contract review, compliance, term sheets
    # -----------------------------------------
    - name: "Linda"
      apiKey: "${N8N_LINDA_KEY}"
      baseURL: "${N8N_LINDA_URL}"
      models:
        default: ["linda"]
        fetch: false
      titleConvo: true
      titleModel: "linda"
      modelDisplayLabel: "Linda - Legal"
      
      directEndpoint: true
      forcePrompt: false
      streamRate: 0
      addParams:
        stream: false
      headers:
        Content-Type: "application/json"
      dropParams: ["stop", "frequency_penalty", "presence_penalty", "top_p"]

    # -----------------------------------------
    # n8n: Mia (Personal Brand)
    # LinkedIn content, thought leadership
    # -----------------------------------------
    - name: "Mia"
      apiKey: "${N8N_MIA_KEY}"
      baseURL: "${N8N_MIA_URL}"
      models:
        default: ["mia"]
        fetch: false
      titleConvo: true
      titleModel: "mia"
      modelDisplayLabel: "Mia - Personal Brand"
      iconURL: "https://cdn.prod.website-files.com/670d763f1593e36762b44a69/695aae28bdfbd44b1c8020e9_mia-profile.png"
      directEndpoint: true
      forcePrompt: false
      streamRate: 0
      addParams:
        stream: false
      headers:
        Content-Type: "application/json"
      dropParams: ["stop", "frequency_penalty", "presence_penalty", "top_p"]

    # -----------------------------------------
    # n8n: Marcus (Scouting & Market Intel)
    # Deal sourcing, market research, regulatory watch
    # -----------------------------------------
    - name: "Marcus"
      apiKey: "${N8N_MARCUS_KEY}"
      baseURL: "${N8N_MARCUS_URL}"
      models:
        default: ["marcus"]
        fetch: false
      titleConvo: true
      titleModel: "marcus"
      modelDisplayLabel: "Marcus - Market Intel"
      iconURL: "https://cdn.prod.website-files.com/670d763f1593e36762b44a69/695aae5e117e0b0110cab67e_marcus-profile.png"
      directEndpoint: true
      forcePrompt: false
      streamRate: 0
      addParams:
        stream: false
      headers:
        Content-Type: "application/json"
      dropParams: ["stop", "frequency_penalty", "presence_penalty", "top_p"]

# =============================================================================
# FILE CONFIGURATION
# =============================================================================
fileConfig:
  # Server-wide limits
  serverFileSizeLimit: 50    # 50 MB max per file
  avatarSizeLimit: 2         # 2 MB for avatars
  
  # Default for all endpoints
  default:
    fileLimit: 10
    fileSizeLimit: 25
    totalSizeLimit: 100
    supportedMimeTypes:
      # Documents
      - "application/pdf"
      - "application/msword"
      - "application/vnd.openxmlformats-officedocument.wordprocessingml.document"
      - "application/vnd.ms-excel"
      - "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"
      - "application/vnd.ms-powerpoint"
      - "application/vnd.openxmlformats-officedocument.presentationml.presentation"
      # Text
      - "text/plain"
      - "text/csv"
      - "text/markdown"
      # Images
      - "image/jpeg"
      - "image/png"
      - "image/gif"
      - "image/webp"

# =============================================================================
# RATE LIMITS (relaxed for internal team)
# =============================================================================
rateLimits:
  fileUploads:
    ipMax: 200
    ipWindowInMinutes: 60
    userMax: 100
    userWindowInMinutes: 60

# =============================================================================
# ACTIONS (API integrations whitelist)
# =============================================================================
actions:
  allowedDomains:
    - "lifa.vc"
    - "lifa.ventures"
    - "n8n.lifa.tools"
    - "anything.lifa.tools"
    - "ai.lifa.tools"
    - "api.attio.com"
    - "api.perplexity.ai"
    - "docs.google.com"
    - "sheets.googleapis.com"
    - "drive.googleapis.com"
    - "slack.com"
    - "api.slack.com"
