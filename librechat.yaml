# =============================================================================
# LIFA.VC LibreChat Configuration
# =============================================================================
# Hybrid setup: LIFA.VC agents route to n8n, plus direct access to AI providers
# For more information: https://www.librechat.ai/docs/configuration/librechat_yaml
# =============================================================================

# Configuration version (required)
version: 1.2.1

# Cache settings
cache: true

# =============================================================================
# FILE STORAGE -  S3-Compatible Object Storage
# =============================================================================
# Using S3 Object Storage for GDPR compliance (data stays in EU)
fileStrategies:
  default: "s3"

# =============================================================================
# INTERFACE CUSTOMIZATION
# =============================================================================
interface:
  # Welcome message
  customWelcome: |
    Welcome to **LIFA.VC AI Platform** â€” your intelligent partner for venture capital operations.
    
    Select an agent from the menu, or create your own for specific tasks.

  # === CORE FEATURES (all enabled for flexibility) ===
  endpointsMenu: true       # Switch between endpoints (n8n, OpenAI, Anthropic, etc.)
  modelSelect: true         # Select models within endpoints
  parameters: true          # Adjust temperature, etc. when needed
  sidePanel: true           # Side panel for navigation
  presets: true             # Save and reuse conversation presets
  prompts: true             # Prompt library
  bookmarks: true           # Bookmark conversations

  # === AGENTS (enabled - core feature for your setup) ===
  agents: true              # Create and use LibreChat agents
  
  # === MULTI-CONVERSATION (enabled - mix agents in same chat) ===
  multiConvo: true          # Use multiple agents in one conversation

  # === FILE FEATURES ===
  fileCitations: true       # Show file citations in responses
  fileSearch: true          # Search within files

  # === SHARING (enabled for GP team collaboration) ===
  peoplePicker:
    users: true             # Share with specific users
    groups: true            # Share with groups (if you create a "GP" group)
    roles: true             # Role-based sharing

  # === MARKETPLACE (optional - browse community agents) ===
  marketplace:
    use: true               # Enable if you want to browse/import community agents

  # === MCP SERVERS (optional - enable if you want MCP integrations) ===
  mcpServers:
    use: true               # Use MCP servers
    create: true            # Create custom MCP servers
    share: true             # Share MCP configs between users

  # === LEGAL LINKS ===
  privacyPolicy:
    externalUrl: 'https://www.lifa.ventures/legal/privacy-policy'
    openNewTab: true

  termsOfService:
    externalUrl: 'https://lifa.vc/terms'
    openNewTab: true
    modalAcceptance: false  # Disable modal for internal team use

# =============================================================================
# REGISTRATION & ACCESS
# =============================================================================
registration:
  # Disable social logins - email only for internal team
  socialLogins: ["google"]
  
  # Restrict registration to LIFA domain
  allowedDomains:
    - "lifa.vc"
    - "lifa.ventures"

# =============================================================================
# ENDPOINTS CONFIGURATION
# =============================================================================
# You have multiple endpoint types:
# 1. Custom endpoints (n8n webhooks for LIFA agents)
# 2. Built-in endpoints (OpenAI, Anthropic, Google) for ad-hoc chats
#
# Built-in endpoints are configured via environment variables:
# - OPENAI_API_KEY, ANTHROPIC_API_KEY, GOOGLE_KEY, etc.
# =============================================================================

endpoints:
  agents:
    capabilities:
      - "execute_code"
      - "file_search"
      - "actions"
      - "tools"
      - "artifacts"
      - "context"   # Enables "Upload as Text"
      - "ocr"       # Enhances with OCR
  custom:
    - name: "LIFA.VC Agents"
      apiKey: "${BRIDGE_BEARER_TOKEN}"
      baseURL: "http://10.0.1.12:3333/v1"
      models:
        default: ["alfred", "alex", "sarah", "linda", "mia", "marcus"]
        fetch: true  # Bridge supports /v1/models endpoint
      titleConvo: true
      titleModel: "alfred"
      modelDisplayLabel: "LIFA.VC"
      headers:
        X-Chat-Id: "{{LIBRECHAT_BODY_CONVERSATIONID}}"
        X-User-Id: "{{LIBRECHAT_USER_ID}}"
        X-User-Email: "{{LIBRECHAT_USER_EMAIL}}"
        X-User-Name: "{{LIBRECHAT_USER_NAME}}"
        X-User-Role: "{{LIBRECHAT_USER_ROLE}}"
    #  summary: true
    
ocr:
  mistralModel: "mistral-ocr-latest"       # Optional: Specify Mistral model, defaults to "mistral-ocr-latest"
  apiKey: "${MISTRAL_API_KEY}"           # Optional: Defaults to OCR_API_KEY env variable
  strategy: "mistral_ocr"                  # Optional: Defaults to "mistral_ocr"
# =============================================================================
# FILE CONFIGURATION
# =============================================================================
fileConfig:
  # Server-wide limits
  serverFileSizeLimit: 50    # 50 MB max per file
  avatarSizeLimit: 2         # 2 MB for avatars
  endpoints:
    # Use your custom endpoint NAME as the key
    "LIFA.VC Agents":
      fileLimit: 5
      fileSizeLimit: 20
      totalSizeLimit: 50
      supportedMimeTypes:
        - "image/.*"                    # All images
        - "application/pdf"             # PDFs
        - "text/.*"                     # All text files
        - "application/vnd\\.openxmlformats-officedocument\\..*"  # Office docs (docx, xlsx, pptx)
  ocr:
    supportedMimeTypes:
      - "^image/(jpeg|gif|png|webp|heic|heif)$"
      - "^application/pdf$"
      - "^application/vnd\\.openxmlformats-officedocument\\.(wordprocessingml\\.document|presentationml\\.presentation|spreadsheetml\\.sheet)$"
      
  # Default for all endpoints
  default:
    fileLimit: 10
    fileSizeLimit: 25
    totalSizeLimit: 100
    supportedMimeTypes:
      - "image/.*"                    # All images
      - "application/pdf"             # PDFs
      - "text/.*"                     # All text files
      - "application/vnd\\.openxmlformats-officedocument\\..*" 

# =============================================================================
# RATE LIMITS (relaxed for internal team)
# =============================================================================
rateLimits:
  fileUploads:
    ipMax: 200
    ipWindowInMinutes: 60
    userMax: 100
    userWindowInMinutes: 60

# =============================================================================
# ACTIONS (API integrations whitelist)
# =============================================================================
actions:
  allowedDomains:
    - "lifa.vc"
    - "lifa.ventures"
    - "n8n.lifa.tools"
    - "anything.lifa.tools"
    - "ai.lifa.tools"
    - "api.attio.com"
    - "api.perplexity.ai"
    - "docs.google.com"
    - "sheets.googleapis.com"
    - "drive.googleapis.com"
    - "slack.com"
    - "api.slack.com"
